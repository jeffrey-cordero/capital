{
   "Version": "2012-10-17",
   "Statement": [
      {
         "Sid": "EC2Permissions",
         "Effect": "Allow",
         "Action": [
            "ec2:DescribeVpcs",
            "ec2:DescribeVpcAttribute",
            "ec2:DescribeImages",
            "ec2:DescribeInstances",
            "ec2:DescribeInstanceTypes",
            "ec2:DescribeInstanceAttribute",
            "ec2:DescribeKeyPairs",
            "ec2:DescribeSecurityGroups",
            "ec2:DescribeSubnets",
            "ec2:DescribeVolumes",
            "ec2:DescribeNetworkInterfaces",
            "ec2:DescribeAccountAttributes",
            "ec2:DescribeAvailabilityZones",
            "ec2:RunInstances",
            "ec2:StartInstances",
            "ec2:StopInstances",
            "ec2:TerminateInstances",
            "ec2:ModifyInstanceAttribute",
            "ec2:CreateTags",
            "ec2:DescribeTags",
            "ec2:DeleteTags",
            "ec2:DescribeInstanceCreditSpecifications",
            "ec2:CreateSecurityGroup",
            "ec2:DeleteSecurityGroup",
            "ec2:AuthorizeSecurityGroupIngress",
            "ec2:AuthorizeSecurityGroupEgress",
            "ec2:RevokeSecurityGroupIngress",
            "ec2:RevokeSecurityGroupEgress"
         ],
         "Resource": "*"
      },
      {
         "Sid": "IAMRolePermissions",
         "Effect": "Allow",
         "Action": [
            "iam:CreateRole",
            "iam:DeleteRole",
            "iam:GetRole",
            "iam:ListRolePolicies",
            "iam:ListAttachedRolePolicies",
            "iam:ListInstanceProfilesForRole",
            "iam:AttachRolePolicy",
            "iam:DetachRolePolicy",
            "iam:PutRolePolicy",
            "iam:GetRolePolicy",
            "iam:DeleteRolePolicy",
            "iam:TagRole",
            "iam:UntagRole",
            "iam:PassRole"
         ],
         "Resource": "arn:aws:iam::*:role/capital-*"
      },
      {
         "Sid": "IAMInstanceProfilePermissions",
         "Effect": "Allow",
         "Action": [
            "iam:CreateInstanceProfile",
            "iam:DeleteInstanceProfile",
            "iam:GetInstanceProfile",
            "iam:AddRoleToInstanceProfile",
            "iam:RemoveRoleFromInstanceProfile"
         ],
         "Resource": "arn:aws:iam::*:instance-profile/capital-*"
      },
      {
         "Sid": "SSMSessionManagerPermissions",
         "Effect": "Allow",
         "Action": [
            "ssm:StartSession",
            "ssm:TerminateSession",
            "ssm:ResumeSession",
            "ssm:DescribeSessions",
            "ssm:GetConnectionStatus"
         ],
         "Resource": [
            "arn:aws:ec2:*:*:instance/*",
            "arn:aws:ssm:*:*:document/SSM-SessionManagerRunShell",
            "arn:aws:ssm:*:*:session/*"
         ]
      },
      {
         "Sid": "SecretsManagerPermissions",
         "Effect": "Allow",
         "Action": [
            "secretsmanager:GetSecretValue",
            "secretsmanager:PutSecretValue",
            "secretsmanager:DescribeSecret",
            "secretsmanager:ListSecrets"
         ],
         "Resource": "arn:aws:secretsmanager:*:*:secret:prod/capital/*"
      },
      {
         "Sid": "RDSPermissions",
         "Effect": "Allow",
         "Action": [
            "rds:CreateDBInstance",
            "rds:DeleteDBInstance",
            "rds:DescribeDBInstances",
            "rds:ModifyDBInstance",
            "rds:CreateDBSubnetGroup",
            "rds:DeleteDBSubnetGroup",
            "rds:DescribeDBSubnetGroups",
            "rds:ListTagsForResource",
            "rds:AddTagsToResource",
            "rds:RemoveTagsFromResource"
         ],
         "Resource": "*"
      },
      {
         "Sid": "ElastiCachePermissions",
         "Effect": "Allow",
         "Action": [
            "elasticache:CreateCacheCluster",
            "elasticache:DeleteCacheCluster",
            "elasticache:DescribeCacheClusters",
            "elasticache:CreateCacheSubnetGroup",
            "elasticache:DeleteCacheSubnetGroup",
            "elasticache:DescribeCacheSubnetGroups",
            "elasticache:ListTagsForResource",
            "elasticache:AddTagsToResource",
            "elasticache:RemoveTagsFromResource"
         ],
         "Resource": "*"
      }
   ]
}